(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,t,a){e.exports=a(67)},67:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(14),i=a.n(r),o=a(15),m=a(13),s=a(16),c=a(1),u=a(2),d=a(4),p=a(3),h=a(5);var E=function(e){var t=e.customer;return l.a.createElement("div",null,l.a.createElement("p",null,"Name:",t.name),l.a.createElement("p",null,"Email:",t.email),l.a.createElement("p",null,"Mobile:",t.mobile),l.a.createElement("span",null,l.a.createElement("button",{onClick:function(){return e.handleEdit(t)}},"Edit"),l.a.createElement("button",{onClick:function(){return e.handleRemoveCustomer(t._id)}},"Delete")))},b=a(37),v=a.n(b).a.create({baseURL:"http://localhost:3005"}),f=a(12),y=a(18),g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={name:"",email:"",mobile:"",isEdit:!1},a.handleSubmit=a.handleSubmit.bind(Object(y.a)(a)),a.handleChange=a.handleChange.bind(Object(y.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={name:this.state.name,email:this.state.email,mobile:this.state.mobile};this.setState({name:"",email:"",mobile:""}),this.props.customer&&(t.id=this.props.customer._id),this.props.handleNewCustomer(t)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",null,"Name:",l.a.createElement("input",{type:"text",value:this.state.name,onChange:this.handleChange,name:"name"})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,"Email:",l.a.createElement("input",{type:"text",value:this.state.email,onChange:this.handleChange,name:"email"})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,"Mobile:",l.a.createElement("input",{type:"number",value:this.state.mobile,onChange:this.handleChange,name:"mobile"})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"submit"})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isEdit!==t.isEdit?{name:e.customer.name,email:e.customer.email,mobile:e.customer.mobile,isEdit:e.isEdit}:null}}]),t}(l.a.Component),C=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).handleNewCustomer=function(t){console.log(t.id),t.id&&v.put("/customers/".concat(t.id),t).then(function(t){console.log(t.data),t.data.errors?(window.alert(t.data.message),console.log("validation error",t.data.error)):(console.log("success",t.data),v.get("/customers").then(function(t){var a=t.data;e.setState({customers:a,isEdit:!1,customer:{}})}).catch(function(e){console.log(e)}))}),t.id||v.post("/customers",t).then(function(t){if(t.data.errors)alert(t.data.message);else{var a=t.data;e.setState(function(e){return{customers:[].concat(Object(s.a)(e.customers),[a])}})}})},e.handleEdit=function(t){e.setState({customer:t,isEdit:!0})},e.handleRemoveCustomer=function(t){v.delete("/customers/".concat(t)).then(function(t){e.setState(function(e){return{customers:e.customers.filter(function(e){return e._id!==t.data._id})}})}).catch(function(e){console.log(e)})},e.useDiv={display:"flex"},e.useFix={position:"relative"},e.state={customers:[],isEdit:!1,customer:null},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.get("/customers").then(function(t){var a=t.data;e.setState({customers:a})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:this.useDiv},l.a.createElement("div",null,this.state.customers.map(function(t){return l.a.createElement(E,{key:t._id,customer:t,handleRemoveCustomer:e.handleRemoveCustomer,handleEdit:e.handleEdit})})),l.a.createElement("div",{style:this.useFix},l.a.createElement(g,{customer:this.state.customer,isEdit:this.state.isEdit,handleNewCustomer:this.handleNewCustomer})))}}]),t}(n.Component);var O=function(e){var t=e.department;return l.a.createElement("div",null,l.a.createElement("p",null,"Name:",t.name),l.a.createElement("span",null,l.a.createElement("button",{onClick:function(){return e.handleEdit(t)}},"Edit"),l.a.createElement("button",{onClick:function(){return e.handleRemoveDepartment(t._id)}},"Delete")))},S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={name:a.state.name};a.setState({name:""}),a.props.department&&(t.id=a.props.department._id),a.props.handleNewDepartment(t)},a.state={name:"",isEdit:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",{htmlFor:"name"},"Name:"),l.a.createElement("input",{type:"text",value:this.state.name,onChange:this.handleChange,name:"name"}),l.a.createElement("input",{type:"submit"})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isEdit!==t.isEdit?{name:e.department.name,isEdit:e.isEdit}:null}}]),t}(l.a.Component),j=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).handleNewDepartment=function(t){t.id&&v.put("/departments/".concat(t.id),t).then(function(t){console.log(t.data),t.data.errors?(window.alert(t.data.message),console.log("validation error",t.data.error)):(console.log("success",t.data),v.get("/departments").then(function(t){var a=t.data;e.setState({departments:a,isEdit:!1,department:{}})}).catch(function(e){console.log(e)}))}),t.id||v.post("/departments",t).then(function(t){if(t.data.errors)alert(t.data.message);else{var a=t.data;e.setState(function(e){return{departments:[].concat(Object(s.a)(e.departments),[a])}})}})},e.handleRemoveDepartment=function(t){v.delete("/departments/".concat(t)).then(function(t){e.setState(function(e){return{departments:e.departments.filter(function(e){return e._id!==t.data._id})}})}).catch(function(e){console.log(e)})},e.handleEdit=function(t){e.setState({department:t,isEdit:!0})},e.useDiv={display:"flex"},e.state={departments:[],isEdit:!1,department:null},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.get("/departments").then(function(t){var a=t.data;e.setState({departments:a})})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:this.useDiv},l.a.createElement("div",null,this.state.departments.map(function(t){return l.a.createElement(O,{key:t._id,department:t,handleRemoveDepartment:e.handleRemoveDepartment,handleEdit:e.handleEdit})})),l.a.createElement("div",null,l.a.createElement(S,{department:this.state.department,isEdit:this.state.isEdit,handleNewDepartment:this.handleNewDepartment})))}}]),t}(n.Component);var k=function(e){var t=e.employee;return l.a.createElement("div",null,l.a.createElement("p",null,"Name:",t.name),l.a.createElement("p",null,"Email:",t.email),l.a.createElement("p",null,"Mobile:",t.mobile),l.a.createElement("p",null,"Department:",t.department.name),l.a.createElement("span",null,l.a.createElement("button",{onClick:function(){return e.handleEdit(t)}},"Edit"),l.a.createElement("button",{onClick:function(){return e.handleRemoveEmployee(t._id)}},"Delete")))},D=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).handleChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a={name:e.state.name,email:e.state.email,mobile:e.state.mobile,department:e.state.department};e.setState({name:"",email:"",mobile:"",department:""}),e.props.employee&&(a.id=e.props.employee._id),e.props.handleNewEmployee(a)},e.state={name:"",email:"",mobile:"",department:"",departments:[],isEdit:!1},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.get("/departments").then(function(t){var a=t.data;e.setState({departments:a})})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",null,"Name:",l.a.createElement("input",{type:"text",value:this.state.name,onChange:this.handleChange,name:"name"})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,"Email:",l.a.createElement("input",{type:"text",value:this.state.email,onChange:this.handleChange,name:"email"})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,"Mobile:",l.a.createElement("input",{type:"text",value:this.state.mobile,onChange:this.handleChange,name:"mobile"})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,"Department:",this.props.isEdit?l.a.createElement("select",{value:this.state.department,onChange:this.handleChange,name:"department"},l.a.createElement("option",{value:this.state.department._id},this.state.department.name),this.state.departments.map(function(t){return t._id===e.state.department._id?null:l.a.createElement("option",{key:t._id,value:t._id},t.name)})):l.a.createElement("select",{value:this.state.department,onChange:this.handleChange,name:"department"},l.a.createElement("option",{value:""},"select"),this.state.departments.map(function(e){return l.a.createElement("option",{key:e._id,value:e._id},e.name)}))),l.a.createElement("br",null)," ",l.a.createElement("br",null),l.a.createElement("input",{type:"submit"})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isEdit!==t.isEdit?{name:e.employee.name,email:e.employee.email,mobile:e.employee.mobile,department:e.employee.department,isEdit:e.isEdit}:null}}]),t}(l.a.Component),w=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).handleEdit=function(t){e.setState({employee:t,isEdit:!0})},e.handleRemoveEmployee=function(t){v.delete("/employees/".concat(t)).then(function(t){e.setState(function(e){return{employees:e.employees.filter(function(e){return e._id!==t.data._id})}})}).catch(function(e){console.log(e)})},e.handleNewEmployee=function(t){t.id?v.put("/employees/".concat(t.id),t).then(function(t){console.log(t.data),t.data.errors?(window.alert(t.data.message),console.log("validation error",t.data.error)):(console.log("success",t.data),v.get("/employees").then(function(t){var a=t.data;e.setState({employees:a,isEdit:!1,employee:{}})}).catch(function(e){console.log(e)}))}):v.post("/employees",t).then(function(t){if(t.data.errors)alert(t.data.message);else{var a=t.data;e.setState(function(e){return{employees:[].concat(Object(s.a)(e.employees),[a])}})}})},e.state={employees:[],isEdit:!1,employee:null},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.get("/employees").then(function(t){var a=t.data;e.setState({employees:a})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",null,this.state.employees.map(function(t){return l.a.createElement(k,{key:t._id,employee:t,handleRemoveEmployee:e.handleRemoveEmployee,handleEdit:e.handleEdit})})),l.a.createElement("div",null,l.a.createElement(D,{employee:this.state.employee,isEdit:this.state.isEdit,handleNewEmployee:this.handleNewEmployee})))}}]),t}(n.Component),_=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null)}}]),t}(n.Component),N=a(19),x=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).handleChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.handleSelect=function(t){e.setState(Object(f.a)({},t.name,t.value)),"department"==t.name?e.setState(function(e){return{employeesnew:e.employees.filter(function(t){return t.department_id==e.department})}}):1==Array.isArray(t)&&(t=t.map(function(e){return e.value}),e.setState({employee:t}))},e.handleSubmit=function(t){t.preventDefault();var a={customerId:e.state.customer,departmentId:e.state.department,employeeIds:e.state.employee,priority:e.state.priority,message:e.state.message,code:"202",isResolved:e.state.isResolved};v.post("/tickets",a).then(function(t){t.data._id&&(console.log("done"),console.log(t.data),e.setState({customers:[],customer:"",departments:[],message:"",priority:"",employees:[],employee:[],employeesnew:[],department:"",isResolved:!1}))})},e.state={customers:[],customer:"",departments:[],message:"",priority:"",employees:[],employee:[],employeesnew:[],department:"",isResolved:!1},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.get("/departments").then(function(t){var a=[];t.data.forEach(function(e){a.push({value:e._id,label:e.name,name:"department"})}),e.setState({departments:a})}),v.get("/customers").then(function(t){var a=[];t.data.forEach(function(e){a.push({value:e._id,label:e.name,name:"customer"})}),e.setState({customers:a}),console.log(a)}),v.get("/employees").then(function(t){var a=[];t.data.forEach(function(e){a.push({value:e._id,label:e.name,name:"employee"})}),e.setState({employees:a})})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h3",null,"Add Ticket"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",null,"Customer",l.a.createElement(N.a,{name:"customer",defaultValue:"Select Customer",options:this.state.customers,onChange:this.handleSelect})),l.a.createElement("br",null),l.a.createElement("label",null,"Department",l.a.createElement(N.a,{name:"department",defaultValue:"Select Department",options:this.state.departments,onChange:this.handleSelect})),l.a.createElement("br",null),l.a.createElement("label",null,"Employees",l.a.createElement(N.a,{isMulti:!0,name:"employee",defaultValue:"Select Employees",options:this.state.employees,onChange:this.handleSelect})),l.a.createElement("br",null),l.a.createElement("label",null,"Message",l.a.createElement("textarea",{name:"message",value:this.state.message,onChange:this.handleChange}),l.a.createElement("br",null),l.a.createElement("br",{required:!0}),"High",l.a.createElement("input",{type:"radio",value:"high",name:"priority",onChange:this.handleChange}),"Low",l.a.createElement("input",{type:"radio",value:"low",name:"priority",onChange:this.handleChange}),"Medium",l.a.createElement("input",{type:"radio",value:"medium",name:"priority",onChange:this.handleChange}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Submit"}))))}}]),t}(l.a.Component),R=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).state={ticket:null},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){v.get("/tickets").then(function(e){console.log(e.data)})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(_,null)),l.a.createElement("div",null,l.a.createElement(x,null)))}}]),t}(n.Component);var M=function(){var e={textAlign:"left",display:"block",padding:"20px",fontFamily:"Open Sans",textDecoration:"none",backgroundColor:"red",width:"15vh"};return l.a.createElement(o.a,null,l.a.createElement("h2",{style:{textAlign:"center",fontFamily:"Open Sans"}},"Ticket Master "),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("div",{use:{height:"100%"}},l.a.createElement(o.b,{to:"/",style:e},"Home"),l.a.createElement(o.b,{to:"/customers",style:e},"Customer"),l.a.createElement(o.b,{to:"/departments",style:e},"Department"),l.a.createElement(o.b,{to:"/employees",style:e},"Employee"),l.a.createElement(o.b,{to:"/tickets",style:e},"Tickets")),l.a.createElement("div",null,l.a.createElement(m.c,null,l.a.createElement(m.a,{path:"/customers",component:C}),l.a.createElement(m.a,{path:"/departments",component:j}),l.a.createElement(m.a,{path:"/employees",component:w}),l.a.createElement(m.a,{path:"/tickets",component:R})))))};i.a.render(l.a.createElement(M,null),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.ed7ef87e.chunk.js.map